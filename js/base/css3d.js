/*!
 * VERSION: 0.8.2
 * DATE: 2016-09-13
 * GIT:https://github.com/shrekshrek/css3d-engine
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(t){var i="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(e){i.C3D=t(i,e)}):"undefined"!=typeof exports?t(i,exports):i.C3D=t(i,{})}(function(t,i){function e(t){return Math.round(t)}function s(t){return Math.round(100*t)/100}function n(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function h(t){var e;switch(t.type){case"sprite":e=new i.Sprite(t.el?{el:t.el}:void 0);break;case"plane":e=new i.Plane(t.el?{el:t.el}:void 0);break;case"box":e=new i.Box(t.el?{el:t.el}:void 0);break;case"skybox":e=new i.Skybox(t.el?{el:t.el}:void 0)}if(void 0!=t.size&&e.size.apply(e,t.size),void 0!=t.position&&e.position.apply(e,t.position),void 0!=t.rotation&&e.rotation.apply(e,t.rotation),void 0!=t.scale&&e.scale.apply(e,t.scale),void 0!=t.origin&&e.origin.apply(e,t.origin),void 0!=t.visibility&&e.visibility.apply(e,t.visibility),void 0!=t.material&&e.material.apply(e,t.material),void 0!=t.filter&&e.filter.apply(e,t.filter),void 0!=t.name&&e.name.apply(e,[t.name]),void 0!=t.id&&e.id.apply(e,[t.id]),void 0!=t["class"]&&e["class"].apply(e,[t["class"]]),e.update(),t.children)for(var s=0,n=t.children.length;n>s;s++){var r=t.children[s],a=h(r);e.addChild(a)}return e}var r=function(t){var i=[];for(var e in t)i.push(e);return i},a=function(t){var i=arguments.length;if(2>i||null==t)return t;for(var e=1;i>e;e++)for(var s=arguments[e],n=r(s),h=n.length,a=0;h>a;a++){var o=n[a];t[o]=s[o]}return t},o=function(t,i){var e,s=this;e=t&&Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},a(e,s,i);var n=function(){this.constructor=e};return n.prototype=s.prototype,e.prototype=new n,t&&a(e.prototype,t),e.__super__=s.prototype,e},l="";return function(){var t=document.createElement("div"),i=["Webkit","Moz","Ms","O"];for(var e in i)if(i[e]+"Transform"in t.style){l=i[e];break}}(),i.getRandomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},i.rgb2hex=function(t,i,e){return(t<<16|i<<8|e).toString(16)},i.hex2rgb=function(t){var i=Math.floor("0x"+t),e=i>>16&255,s=i>>8&255,n=255&i;return[e,s,n]},i.Object=function(){this.initialize.apply(this,arguments)},a(i.Object.prototype,{x:0,y:0,z:0,position:function(t,i,e){switch(arguments.length){case 1:this.x=t,this.y=t,this.z=t;break;case 2:this.x=t,this.y=i;break;case 3:this.x=t,this.y=i,this.z=e}return this},move:function(t,i,e){switch(arguments.length){case 1:this.x+=t,this.y+=t,this.z+=t;break;case 2:this.x+=t,this.y+=i;break;case 3:this.x+=t,this.y+=i,this.z+=e}return this},rotationX:0,rotationY:0,rotationZ:0,rotation:function(t,i,e){switch(arguments.length){case 1:this.rotationX=t,this.rotationY=t,this.rotationZ=t;break;case 2:this.rotationX=t,this.rotationY=i;break;case 3:this.rotationX=t,this.rotationY=i,this.rotationZ=e}return this},rotate:function(t,i,e){switch(arguments.length){case 1:this.rotationX+=t,this.rotationY+=t,this.rotationZ+=t;break;case 2:this.rotationX+=t,this.rotationY+=i;break;case 3:this.rotationX+=t,this.rotationY+=i,this.rotationZ+=e}return this},scaleX:1,scaleY:1,scaleZ:1,scale:function(t,i,e){switch(arguments.length){case 1:this.scaleX=t,this.scaleY=t,this.scaleZ=t;break;case 2:this.scaleX=t,this.scaleY=i;break;case 3:this.scaleX=t,this.scaleY=i,this.scaleZ=e}return this},width:0,height:0,depth:0,size:function(t,i,e){switch(arguments.length){case 1:this.width=t,this.height=t,this.depth=t;break;case 2:this.width=t,this.height=i;break;case 3:this.width=t,this.height=i,this.depth=e}return this},originX:0,originY:0,originZ:0,__orgO:{x:0,y:0,z:0},__orgT:{x:0,y:0,z:0},__orgF:{x:0,y:0,z:0},origin:function(t,i,e){switch(arguments.length){case 1:this.originX=t,this.originY=t,this.originZ=t;break;case 2:this.originX=t,this.originY=i;break;case 3:this.originX=t,this.originY=i,this.originZ=e}return this},__sort:["X","Y","Z"],sort:function(t,i,e){if(arguments.length>3)throw"sort arguments is wrong!";return this.__sort=[t,i,e],this},initialize:function(){this.x=0,this.y=0,this.z=0,this.rotationX=0,this.rotationY=0,this.rotationZ=0,this.scaleX=1,this.scaleY=1,this.scaleZ=1,this.width=0,this.height=0,this.depth=0,this.originX="50%",this.originY="50%",this.originZ="0px",this.__orgO={x:"50%",y:"50%",z:"0px"},this.__orgT={x:"-50%",y:"-50%",z:"0px"},this.__orgF={x:0,y:0,z:0},this.children=[]},parent:null,children:null,addChild:function(t){if(null!=t.parent&&t.parent.removeChild(t),""!=t.__name){if(void 0!==this[t.__name])throw t.__name+" already exist!";this[t.__name]=t}return this.children.push(t),t.parent=this,this},removeChild:function(t){for(var i=this.children.length-1;i>=0;i--)if(this.children[i]===t)return""!=t.__name&&delete this[t.__name],this.children.splice(i,1),t.parent=null,this;return this},removeAllChild:function(){for(var t=this.children.length-1;t>=0;t--){var i=this.children[t];""!=i.__name&&delete this[i.__name],i.parent=null}return this.children=[],this},remove:function(){return null!=this.parent&&this.parent.removeChild(this),this}}),i.Object.extend=o,i.Sprite=i.Object.extend({el:null,alpha:1,visible:!0,initialize:function(t){i.Sprite.__super__.initialize.apply(this,[t]),this.__name="",this.__id="",this.__class="",this.alpha=1,this.visible=!0;var e;if(t&&t.el)switch(typeof t.el){case"string":e=document.createElement("div"),e.innerHTML=t.el;break;case"object":1===t.el.nodeType&&(e=t.el)}e||(e=document.createElement("div")),e.style.position="absolute",e.style[l+"Transform"]="translateZ(0px)",e.style[l+"TransformStyle"]="preserve-3d",this.el=e,e.le=this},__name:"",name:function(t){return this.__name=t,""==t?delete this.el.dataset.name:this.el.dataset.name=t,this},__id:"",id:function(t){return this.__id=t,this.el.id=t,this},__class:"","class":function(t){return this.__class=t,this.el.className=t,this},update:function(){return this.updateS(),this.updateM(),this.updateO(),this.updateT(),this.updateV(),this},updateS:function(){return this},updateM:function(){if(!this.__mat)return this;for(var t in this.__mat)switch(t){case"bothsides":this.el.style[l+"BackfaceVisibility"]=this.__mat[t]?"visible":"hidden";break;case"image":this.el.style["background"+n(t)]=""!==this.__mat[t]?"url("+this.__mat[t]+")":"";break;default:this.el.style["background"+n(t)]=this.__mat[t]}return this},updateO:function(){if("number"==typeof this.originX){var t=e(this.originX-this.__orgF.x);this.__orgO.x=t+"px",this.__orgT.x=-t+"px"}else this.__orgO.x=this.originX,this.__orgT.x="-"+this.originX;if("number"==typeof this.originY){var i=e(this.originY-this.__orgF.y);this.__orgO.y=i+"px",this.__orgT.y=-i+"px"}else this.__orgO.y=this.originY,this.__orgT.y="-"+this.originY;if("number"==typeof this.originZ){var s=e(this.originZ-this.__orgF.z);this.__orgO.z=s+"px",this.__orgT.z=-s+"px"}else this.__orgO.z=this.__orgT.z="0px";return this.el.style[l+"TransformOrigin"]=this.__orgO.x+" "+this.__orgO.y+" "+this.__orgO.z,this},updateT:function(){var t=this.__sort[0],i=this.__sort[1],e=this.__sort[2];return this.el.style[l+"Transform"]="translate3d("+this.__orgT.x+", "+this.__orgT.y+", "+this.__orgT.z+") translate3d("+s(this.x)+"px,"+s(this.y)+"px,"+s(this.z)+"px) rotate"+t+"("+s(this["rotation"+t])%360+"deg) rotate"+i+"("+s(this["rotation"+i])%360+"deg) rotate"+e+"("+s(this["rotation"+e])%360+"deg) scale3d("+s(this.scaleX)+", "+s(this.scaleY)+", "+s(this.scaleZ)+") ",this},updateV:function(){return this.el.style.opacity=this.alpha,this.el.style.display=this.visible?"block":"none",this},addChild:function(t){return i.Sprite.__super__.addChild.apply(this,[t]),this.el&&t.el&&this.el.appendChild(t.el),this},removeChild:function(t){for(var i=this.children.length-1;i>=0;i--)if(this.children[i]===t)return""!=t.__name&&delete this[t.__name],this.children.splice(i,1),t.parent=null,this.el.removeChild(t.el),this;return this},removeAllChild:function(){for(var t=this.children.length-1;t>=0;t--){var i=this.children[t];""!=i.__name&&delete this[i.__name],i.parent=null,this.el.removeChild(i.el)}return this.children=[],this},on:function(t){if("object"==typeof t)for(var i in t)this.el.addEventListener(i,t[i],!1);else 2===arguments.length?this.el.addEventListener(arguments[0],arguments[1],!1):3===arguments.length&&this.el.addEventListener(arguments[0],arguments[1],arguments[2]);return this},off:function(t){if("object"==typeof t)for(var i in t)this.el.removeEventListener(i,t[i],!1);else 2===arguments.length&&this.el.removeEventListener(arguments[0],arguments[1],!1);return this},buttonMode:function(t){return this.el.style.cursor=t?"pointer":"auto",this},__mat:null,material:function(t){return this.__mat=t,this},visibility:function(t){return void 0!==t.visible&&(this.visible=t.visible),void 0!==t.alpha&&(this.alpha=t.alpha),this}}),i.Stage=i.Sprite.extend({camera:null,fov:null,__rfix:null,__pfix:null,initialize:function(t){i.Stage.__super__.initialize.apply(this,[t]),t&&t.el||(this.el.style.top="0px",this.el.style.left="0px",this.el.style.width="0px",this.el.style.height="0px"),this.el.style[l+"Perspective"]="800px",this.el.style[l+"TransformStyle"]="flat",this.el.style[l+"Transform"]="",this.el.style.overflow="hidden",this.__rfix=new i.Sprite,this.el.appendChild(this.__rfix.el),this.__pfix=new i.Sprite,this.__rfix.el.appendChild(this.__pfix.el),this.setCamera(new i.Camera)},updateS:function(){return this.el.style.width=e(this.width)+"px",this.el.style.height=e(this.height)+"px",this},updateT:function(){return this.fov=e(.5/Math.tan(.5*this.camera.fov/180*Math.PI)*this.height),this.el.style[l+"Perspective"]=this.fov+"px",this.__rfix.position(e(this.width/2),e(this.height/2),this.fov).rotation(-this.camera.rotationX,-this.camera.rotationY,-this.camera.rotationZ).updateT(),this.__pfix.position(-this.camera.x,-this.camera.y,-this.camera.z).updateT(),this},addChild:function(t){return this.__pfix.addChild(t),this},removeChild:function(t){return this.__pfix.removeChild(t),this},setCamera:function(t){return this.camera&&(this.camera.stage=null),this.camera=t,this.camera.stage=this,this}}),i.Camera=i.Object.extend({fov:null,stage:null,initialize:function(t){i.Camera.__super__.initialize.apply(this,[t]),this.fov=75},update:function(){return this.updateT(),this},updateS:function(){return this},updateM:function(){return this},updateT:function(){return this.stage&&this.stage.updateT(),this},updateV:function(){return this}}),i.Plane=i.Sprite.extend({initialize:function(t){i.Plane.__super__.initialize.apply(this,[t])},update:function(){return i.Plane.__super__.update.apply(this),this.updateF(),this},updateS:function(){return this.el.style.width=e(this.width)+"px",this.el.style.height=e(this.height)+"px",this},updateF:function(){if(!this.__flt)return this;var t="";for(var i in this.__flt)t+=""!==this.__flt[i]?i+"("+this.__flt[i].join(",")+")":"";return""!==t&&(this.el.style[l+"Filter"]=t),this},__flt:null,filter:function(t){return this.__flt=t,this}}),i.Box=i.Sprite.extend({front:null,back:null,left:null,right:null,up:null,down:null,initialize:function(t){i.Box.__super__.initialize.apply(this,[t]),this.front=new i.Plane,this.front.name="front",this.addChild(this.front),this.back=new i.Plane,this.back.name="back",this.addChild(this.back),this.left=new i.Plane,this.left.name="left",this.addChild(this.left),this.right=new i.Plane,this.right.name="right",this.addChild(this.right),this.up=new i.Plane,this.up.name="up",this.addChild(this.up),this.down=new i.Plane,this.down.name="down",this.addChild(this.down)},update:function(){return i.Box.__super__.update.apply(this),this.updateF(),this},updateS:function(){var t=e(this.width),i=e(this.height),s=e(this.depth);return this.__orgF.x=this.width/2,this.__orgF.y=this.height/2,this.__orgF.z=this.depth/2,this.front.size(t,i,0).position(0,0,s/2).rotation(0,0,0).updateS().updateT(),this.back.size(t,i,0).position(0,0,-s/2).rotation(0,180,0).updateS().updateT(),this.left.size(s,i,0).position(-t/2,0,0).rotation(0,-90,0).updateS().updateT(),this.right.size(s,i,0).position(t/2,0,0).rotation(0,90,0).updateS().updateT(),this.up.size(t,s,0).position(0,-i/2,0).rotation(90,0,0).updateS().updateT(),this.down.size(t,s,0).position(0,i/2,0).rotation(-90,0,0).updateS().updateT(),this},updateM:function(){if(!this.__mat)return this;var t=!0;for(var i in this.__mat)switch(i){case"front":case"back":case"left":case"right":case"up":case"down":void 0==this.__mat[i].bothsides&&(this.__mat[i].bothsides=!1),this[i].material(this.__mat[i]).updateM(),t=!1}return t&&(void 0==this.__mat.bothsides&&(this.__mat.bothsides=!1),this.front.material(this.__mat).updateM(),this.back.material(this.__mat).updateM(),this.left.material(this.__mat).updateM(),this.right.material(this.__mat).updateM(),this.up.material(this.__mat).updateM(),this.down.material(this.__mat).updateM()),this},updateF:function(){return this.__flt?(this.front.filter(this.__flt).updateF(),this.back.filter(this.__flt).updateF(),this.left.filter(this.__flt).updateF(),this.right.filter(this.__flt).updateF(),this.up.filter(this.__flt).updateF(),this.down.filter(this.__flt).updateF(),this):this},__flt:null,filter:function(t){return this.__flt=t,this}}),i.Skybox=i.Box.extend({updateS:function(){var t=e(this.width),i=e(this.height),s=e(this.depth);return this.__orgF.x=this.width/2,this.__orgF.y=this.height/2,this.__orgF.z=this.depth/2,this.front.size(t,i,0).position(0,0,-s/2).rotation(0,0,0).updateS().updateT(),this.back.size(t,i,0).position(0,0,s/2).rotation(0,180,0).updateS().updateT(),this.left.size(s,i,0).position(-t/2,0,0).rotation(0,90,0).updateS().updateT(),this.right.size(s,i,0).position(t/2,0,0).rotation(0,-90,0).updateS().updateT(),this.up.size(t,s,0).position(0,-i/2,0).rotation(-90,0,0).updateS().updateT(),this.down.size(t,s,0).position(0,i/2,0).rotation(90,0,0).updateS().updateT(),this}}),i.create=function(t){var i;switch(typeof t){case"array":i={type:"sprite",children:t};break;case"object":i=t;break;default:return}return h(i)},i});


/*!
 * VERSION: 0.7.0
 * DATE: 2016-8-17
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(t){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(e){n.JT=t(n,e)}):"undefined"!=typeof exports?t(n,exports):n.JT=t(n,{})}(function(t,n){function e(t,n){for(var e in n)t[e]=n[e]}function i(t,n){if(t.length&&t.length>0)for(var e=0;e<t.length;e++)n.call(t[e],e,t[e]);else n.call(t,0,t)}function r(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function a(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function o(t){return Math.round(1e3*t)/1e3}function s(t){return t?D+a(t):D}function u(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function c(t,n){return"rotation"==n||"scale"==n?n:void 0!==t._jt_obj[n]?n:void 0!==t.style[n]?n:(n=s(n),void 0!==t.style[n]?n:void 0)}function h(t,n,e,i){var r={};if(n instanceof Array){r.num=[];for(var a in n){var o=l(t,n[a]);r.num[a]=o.num,r.unit=o.unit}void 0!=e&&(i?r.num.push(e.num):r.num.unshift(e.num))}else r=l(t,n);return r}function l(t,n){var e=p(n);"rem"==t.unit&&"rem"!=e.unit?(w(),t.num=o(t.num*V),t.unit="px"):"rem"!=t.unit&&"rem"==e.unit&&(w(),t.num=o(t.num/V),t.unit="rem");var i;switch(e.ext){case"+=":i=t.num+e.num;break;case"-=":i=t.num-e.num;break;default:i=e.num}return{num:i,unit:e.unit||t.unit}}function f(t){void 0==t._jt_obj&&(t._jt_obj={perspective:0,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0})}function p(t){var n=/(\+=|-=|)(-|)(\d+\.\d+|\d+)(e[+-]?[0-9]{0,2}|)(rem|px|%|)/i,e=n.exec(t);return e?{num:o(e[2]+e[3]+e[4]),unit:e[5],ext:e[1]}:{num:0,unit:"px",ext:""}}function d(t){return/\S\s+\S/g.test(t)||!/\d/g.test(t)}function v(t,n){switch(n){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[n];case"rotation":return t._jt_obj.rotationZ;case"scale":return t._jt_obj.scaleX;default:return m(t,n)}}function m(t,n){if(t.style[n])return t.style[n];if(document.defaultView&&document.defaultView.getComputedStyle){var e=r(n),i=document.defaultView.getComputedStyle(t,"");return i&&i.getPropertyValue(e)}return t.currentStyle?t.currentStyle[n]:null}function _(t,n,e){switch(n){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[n]=e,!0;case"rotation":return t._jt_obj.rotationZ=e,!0;case"scale":return t._jt_obj.scaleX=e,t._jt_obj.scaleY=e,!0;default:return y(t,n,e),!1}}function y(t,n,e){t.style[n]=e}function g(t){return"object"==typeof t&&1===t.nodeType}function j(t){var n="";t._jt_obj.perspective&&(n+="perspective("+t._jt_obj.perspective+") "),(t._jt_obj.x||t._jt_obj.y||t._jt_obj.z)&&(n+="translate3d("+b(t._jt_obj.x)+","+b(t._jt_obj.y)+","+b(t._jt_obj.z)+") "),t._jt_obj.rotationX&&(n+="rotateX("+t._jt_obj.rotationX%360+"deg) "),t._jt_obj.rotationY&&(n+="rotateY("+t._jt_obj.rotationY%360+"deg) "),t._jt_obj.rotationZ&&(n+="rotateZ("+t._jt_obj.rotationZ%360+"deg) "),(1!=t._jt_obj.scaleX||1!=t._jt_obj.scaleY||1!=t._jt_obj.scaleZ)&&(n+="scale3d("+t._jt_obj.scaleX+", "+t._jt_obj.scaleY+", "+t._jt_obj.scaleZ+") "),(t._jt_obj.skewX||t._jt_obj.skewY)&&(n+="skew("+t._jt_obj.skewX+"deg,"+t._jt_obj.skewY+"deg) "),t.style[s("transform")]=n}function b(t){return t+("number"==typeof t?"px":"")}function w(){C||(C=document.createElement("div"),C.style.cssText="border:0 solid; position:absolute; line-height:0px;"),z||(z=document.getElementsByTagName("body")[0]),z.appendChild(C),C.style.borderLeftWidth="1rem",V=parseFloat(C.offsetWidth),z.removeChild(C)}function M(){B=!0;var t=q.length,n=L.length;if(0===t&&0===n)return void(B=!1);var e=Y(),i=e-F;F=e;for(var r=0;t>r;r++){var a=q[r];a&&!a._update(i)&&(a.isActive&&(a.isActive=!1,q.splice(r,1),a.onEnd&&a.onEnd.apply(a,a.onEndParams)),r--,t--)}for(var o=0;n>o;o++){var s=L[o];s&&!s._update(i)&&(L.splice(o,1),s.onEnd&&s.onEnd.apply(s,s.onEndParams),o--,n--)}Z(M)}function P(){this.initialize.apply(this,arguments)}function T(t,n){var e=u(t),r=q.length;i(e,function(t,e){for(var i=r-1;i>=0;i--){var a=q[i];a.target===e&&a[n]()}})}function E(t){for(var n=q.length,e=n-1;e>=0;e--){var i=q[e];i[t]()}}function I(){this.initialize.apply(this,arguments)}function S(t,n){var e=t,r=L.length;i(e,function(t,e){for(var i=r-1;i>=0;i--){var a=L[i];a.onEnd===e&&a[n]()}})}function k(t){for(var n=L.length,e=n-1;e>=0;e--){var i=L[e];i[t]()}}function x(t){t.bezier&&(A(t,t.bezier),t.interpolation=R,delete t.bezier),t.through&&(A(t,t.through),t.interpolation=X,delete t.through),t.linear&&(A(t,t.linear),t.interpolation=O,delete t.linear)}function A(t,n){for(var e in n)for(var i in n[e])0==e?t[i]=[n[e][i]]:t[i].push(n[e][i])}function O(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=N.Linear;return 0>n?a(t[0],t[1],i):n>1?a(t[e],t[e-1],e-i):a(t[r],t[r+1>e?e:r+1],i-r)}function R(t,n){var e,i=0,r=t.length-1,a=Math.pow,o=N.Bernstein;for(e=0;r>=e;e++)i+=a(1-n,r-e)*a(n,e)*t[e]*o(r,e);return i}function X(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=N.Through;return t[0]===t[e]?(0>n&&(r=Math.floor(i=e*(1+n))),a(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],i-r)):0>n?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):n>1?t[e]-(a(t[e],t[e],t[e-1],t[e-1],i-e)-t[e]):a(t[r?r-1:0],t[r],t[r+1>e?e:r+1],t[r+2>e?e:r+2],i-r)}Date.now=Date.now||function(){return(new Date).getTime()};var U=Date.now(),Y=function(){return Date.now()-U},D="";!function(){var t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var e in n)if(n[e]+"Transform"in t.style){D=n[e];break}}();var z,C,V,Z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},q=[],B=!1,F=0;e(P.prototype,{initialize:function(t,e,i,r,a){this.fromVars=i,this.curVars={},this.toVars=r,this.target=t,this.duration=1e3*Math.max(e,0),this.ease=r.ease||n.Linear.None,this.delay=1e3*Math.max(r.delay||0,0),this.yoyo=r.yoyo||!1,this.repeat=this.curRepeat=Math.floor(r.repeat||0),this.repeatDelay=1e3*Math.max(r.repeatDelay||0,0),this.onStart=r.onStart||null,this.onStartParams=r.onStartParams||[],this.onRepeat=r.onRepeat||null,this.onRepeatParams=r.onRepeatParams||[],this.onEnd=r.onEnd||null,this.onEndParams=r.onEndParams||[],this.onUpdate=r.onUpdate||null,this.onUpdateParams=r.onUpdateParams||[],this.isPlaying=r.isPlaying||!0,this.interpolation=r.interpolation||null,this.isActive=r.isActive||!0,this.isReverse=!1,this.isDom=a,this.curTime=0,this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.repeatDelay+this.duration,0!=this.delay&&(this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams)),this.isActive&&this._addSelf()},_update:function(t){if(!this.isPlaying)return!0;if(this.curTime+=t,this.curTime<this.startTime)return!0;if(this.isStart||(this.curTime+=this.repeatDelay),this.curTime<this.startTime+this.repeatDelay)return!0;if(this.curTime<this.endTime)this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams);else{if(0==this.curRepeat)return this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this._checkStart(),!1;this.yoyo&&(this.isReverse=!this.isReverse);var n=(this.curTime-this.endTime)%(this.duration+this.repeatDelay);0==this.repeatDelay?(this.curTime=this.startTime+n,this._updateProp()):(this._updateProp(),this.curTime=this.startTime+n),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this.onRepeat&&this.onRepeat.apply(this,this.onRepeatParams),this.curRepeat>0&&this.curRepeat--}return this._checkStart(),!0},_checkStart:function(){this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this,this.onStartParams))},_updateProp:function(){var t=0==this.duration?1:(this.curTime-this.startTime-this.repeatDelay)/this.duration;t=Math.max(0,Math.min(1,t)),this.isReverse&&(t=1-t);var n=this.ease(t),e=!1;for(var i in this.fromVars){var r,a=this.fromVars[i],s=this.toVars[i];r=s.num instanceof Array?this.interpolation(s.num,n):a.num+(s.num-a.num)*n,r=o(r),this.curVars[i]={num:r,unit:s.unit},this.isDom?(Math.abs(s.num-a.num)>20&&(r=Math.round(r)),_(this.target,i,r+(s.unit||0))&&(e=!0)):this.target[i]=r+(s.unit||0)}e&&j(this.target)},_toEnd:function(){var t=!1;for(var n in this.fromVars){var e=this.toVars[n],i=o(e.num);this.curVars[n]={num:i,unit:e.unit},this.isDom?_(this.target,n,i+(e.unit||0))&&(t=!0):this.target[n]=i+(e.unit||0)}t&&j(this.target)},_addSelf:function(){this.isActive=!0,q.push(this),B||(F=n.now(),M())},_removeSelf:function(){this.isActive=!1;var t=q.indexOf(this);-1!==t&&q.splice(t,1)},active:function(){this._addSelf()},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},kill:function(t){this._removeSelf(),t&&(this._toEnd(),this.onEnd&&this.onEnd.apply(this,this.onEndParams))}}),e(n,{get:function(t,n){var e=u(t);if(void 0!==e.length&&(e=e[0]),g(e)){f(e);var i=c(e,n);return i?v(e,i):null}return e[n]},set:function(t,n){var e=u(t);i(e,function(t,e){if(g(e)){f(e);var i=!1;for(var r in n){var a=c(e,r);if(a)if(d(n[r]))_(e,a,n[r]);else{var o=h(p(v(e,a)),n[r]);_(e,a,o.num+(o.unit||0))&&(i=!0)}}i&&j(e)}else for(var s in n){var o=h(p(e[s]),n[s]);e[s]=o.num+(o.unit||0)}})},fromTo:function(t,n,e,r){x(r);var a=u(t),o=[];return i(a,function(t,i){var a={},s={},u=g(i);if(u){f(i);for(var l in r){var d=c(i,l);if(d){var m=p(v(i,d));a[d]=h(m,e[l]),s[d]=h(m,r[l],a[d],!1)}else s[l]=r[l]}}else for(var l in r)if(void 0!==i[l]){var m=p(i[l]);a[l]=h(m,e[l]),s[l]=h(m,r[l],a[l],!1)}else s[l]=r[l];var _=new P(i,n,a,s,u);o.push(_)}),1==o.length?o[0]:o},from:function(t,n,e){x(e);var r=u(t),a=[];return i(r,function(t,i){var r={},o={},s=g(i);if(s){f(i);for(var u in e){var l=c(i,u);if(l){var d=p(v(i,l));r[l]=h(d,e[u],d,!0),o[l]=d}else o[u]=e[u]}}else for(var u in e)if(void 0!==i[u]){var d=p(i[u]);r[u]=h(d,e[u],d,!0),o[u]=d}else o[u]=e[u];var m=new P(i,n,r,o,s);a.push(m)}),1==a.length?a[0]:a},to:function(t,n,e){x(e);var r=u(t),a=[];return i(r,function(t,i){var r={},o={},s=g(i);if(s){f(i);for(var u in e){var l=c(i,u);if(l){var d=p(v(i,l));r[l]=d,o[l]=h(d,e[u],d,!1)}else o[u]=e[u]}}else for(var u in e)if(void 0!==i[u]){var d=p(i[u]);r[u]=d,o[u]=h(d,e[u],d,!1)}else o[u]=e[u];var m=new P(i,n,r,o,s);a.push(m)}),1==a.length?a[0]:a},kill:function(t,n){var e=u(t);i(e,function(t,e){for(var i=q.length,r=i-1;r>=0;r--){var a=q[r];a.target===e&&a.kill(n)}})},killAll:function(t){for(var n=q.length,e=n-1;e>=0;e--){var i=q[e];i.kill(t)}},play:function(t){T(t,"play")},playAll:function(){E("play")},pause:function(t){T(t,"pause")},pauseAll:function(){E("pause")},isTweening:function(t){var n=u(t);n=n[0]||n;for(var e=q.length,i=e-1;i>=0;i--){var r=q[i];if(r.target===n)return!0}return!1}});var L=[];e(I.prototype,{initialize:function(t,n,e,i){this.delay=1e3*t,this.onEnd=n||null,this.onEndParams=e||[],this.curTime=0,this.endTime=this.delay,this.isPlaying=i||!0,0!=this.delay?this._addSelf():this.onEnd&&this.onEnd.apply(this,this.onEndParams)},_update:function(t){return this.isPlaying?(this.curTime+=t,this.curTime<this.endTime?!0:!1):!0},_addSelf:function(){L.push(this),B||(F=n.now(),M())},_removeSelf:function(){var t=L.indexOf(this);-1!==t&&L.splice(t,1)},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},kill:function(t){this._removeSelf(),t&&(this._toEnd(),this.onEnd&&this.onEnd.apply(this,this.onEndParams))}}),e(n,{call:function(t,n,e,i){return new I(t,n,e,i)},killCall:function(t,n){var e=t,r=L.length;i(e,function(t,e){for(var i=r-1;i>=0;i--){var a=L[i];a.onEnd===e&&a.kill(n)}})},killAllCalls:function(t){for(var n=L.length,e=n-1;e>=0;e--){var i=L[e];i.kill(t)}},playCall:function(t){S(t,"play")},playAllCalls:function(){k("play")},pauseCall:function(t){S(t,"pause")},pauseAllCalls:function(){k("pause")}}),e(n,{path:function(t){x(t);for(var e,i=t.ease||n.Linear.None,r=t.step||1,a=[],o=0;r>=o;o++){e=i(o/r);var s={};for(var u in t)t[u]instanceof Array&&(s[u]=t.interpolation(t[u],e));a.push(s)}return a}});var N={Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=N.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e,i=1;if(t[n])return t[n];for(e=n;e>1;e--)i*=e;return t[n]=i}}(),Through:function(t,n,e,i,r){var a=.5*(e-t),o=.5*(i-n),s=r*r,u=r*s;return(2*n-2*e+a+o)*u+(-3*n+3*e-2*a-o)*s+a*r+n}};return e(n,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i)))},Out:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/i)+1)},InOut:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?-.5*e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i):e*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-n.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*n.Bounce.In(2*t):.5*n.Bounce.Out(2*t-1)+.5}}}),n.now=Y,n});


/*!
 * VERSION: 0.3.0
 * DATE: 2016-8-17
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(e){var i="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;if("function"==typeof define&&define.amd)define(["jstween","exports"],function(t,n){i.JTL=e(i,n,t)});else if("undefined"!=typeof exports){var t=require("jstween");e(i,exports,t)}else i.JTL=e(i,{},i.JT)}(function(e,i,t){function n(e,i){for(var t in i)e[t]=i[t]}function s(e){var i=/(^[a-zA-Z]\w*|)(\+=|-=|)(\d*\.\d*|\d*)/,t=i.exec(e);return{label:t[1],ext:t[2],num:parseFloat(t[3])}}function a(){l=!0;var e=o.length;if(0===e)return void(l=!1);var i=t.now(),n=i-c;c=i;for(var s=e-1;s>=0;s--)o[s]._update(n);h(a)}function r(){this.initialize.apply(this,arguments)}var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},o=[],l=!1,c=0;return n(r.prototype,{initialize:function(){this.labels=[],this.labelTime=0,this.anchors=[],this.anchorId=0,this.tweens=[],this.isPlaying=!1,this.curTime=0},_update:function(e){this.isPlaying&&(this.curTime+=e,this._checkHandler())},_addSelf:function(){o.push(this),l||(c=t.now(),a())},_removeSelf:function(){var e=o.indexOf(this);-1!==e&&o.splice(e,1)},_checkHandler:function(){var e=this.anchors.length;if(this.anchorId>=e)return this._removeSelf(),void(this.isPlaying=!1);var i=this.anchors[this.anchorId];this.curTime>=1e3*i.time&&(this.anchorId==e-1?(this._removeSelf(),this.isPlaying=!1,i.handler.apply()):(i.handler.apply(),this.anchorId++,this._checkHandler()))},_parseTweenTime:function(e,i,t){var n=Math.max(e,0),s=Math.max(i.delay||0,0),a=Math.max(0,Math.floor(i.repeat||0)),r=Math.max(i.repeatDelay||0,0),h=s+n+(r+n)*a,o=this._parsePosition(t);return this.labelTime=Math.max(this.labelTime,o+h),o},_parsePosition:function(e){if(void 0==e)return this.labelTime;var i=s(e),t=0;if(i.label)switch(t=this.getLabelTime(i.label),i.ext){case"+=":t+=i.num;break;case"-=":t-=i.num}else t=i.num;return t},_addAnchor:function(e,i){var t=this.anchors.length;if(0==t)return void this.anchors.push({time:i,handler:e});if(t>0)for(var n=t-1;n>=0;n--){var s=this.anchors[n];if(i>=s.time)return void this.anchors.splice(n+1,0,{time:i,handler:e})}},_addTween:function(e){if(void 0!=e.length)for(var i in e)this.tweens.push(e[i]);else this.tweens.push(e)},_removeTween:function(e){var i=this.tweens.indexOf(e);-1!==i&&this.tweens.splice(i,1)},fromTo:function(e,i,n,s,a){var r=this,h=s.onEnd;s.onEnd=function(e){r._removeTween(this),h&&h.apply(this,e)};var o=function(){var a=t.fromTo(e,i,n,s);r._addTween(a)},l=this._parseTweenTime(i,s,a);return this._addAnchor(o,l),this},from:function(e,i,n,s){var a=this,r=n.onEnd;n.onEnd=function(e){a._removeTween(this),r&&r.apply(this,e)};var h=function(){var s=t.from(e,i,n);a._addTween(s)},o=this._parseTweenTime(i,n,s);return this._addAnchor(h,o),this},to:function(e,i,n,s){var a=this,r=n.onEnd;n.onEnd=function(e){a._removeTween(this),r&&r.apply(this,e)};var h=function(){var s=t.to(e,i,n);a._addTween(s)},o=this._parseTweenTime(i,n,s);return this._addAnchor(h,o),this},kill:function(e,i){var n=function(){t.kill(e,!0)},s=this._parseTweenTime(0,{},i);return this._addAnchor(n,s),this},add:function(e,i){var t=this._parsePosition(i);switch(typeof e){case"function":this._addAnchor(e,t);break;case"string":this.addLabel(e,t);break;default:throw"add action is wrong!!!"}return this},addLabel:function(e,i){this.removeLabel(e);var t=this._parsePosition(i);return this.labels.push({name:e,time:t}),this},removeLabel:function(e){for(var i=this.labels.length,t=i-1;t>=0;t--){var n=this.labels[t];if(e==n.name)return this.labels.splice(t,1),this}return this},getLabelTime:function(e){for(var i=this.labels.length,t=i-1;t>=0;t--){var n=this.labels[t];if(e==n.name)return n.time}return this.labelTime},totalTime:function(){return this.labelTime},play:function(e){this.isPlaying&&this.pause();for(var i=this.tweens.length,t=i-1;t>=0;t--)this.tweens[t].play();this._addSelf(),this.isPlaying=!0,void 0!==e&&this.seek(e)},pause:function(){if(this.isPlaying){for(var e=this.tweens.length,i=e-1;i>=0;i--)this.tweens[i].pause();this._removeSelf(),this.isPlaying=!1}},seek:function(e){var i=this._parsePosition(e);this.curTime=1e3*i;for(var t=this.anchors.length,n=0;t>n;n++){var s=this.anchors[n];if(1e3*s.time>=this.curTime)return void(this.anchorId=n)}},clear:function(){for(var e=this.tweens.length,i=e-1;i>=0;i--)this.tweens[i].kill();this.tweens=[],this.curTime=0,this.labels=[],this.labelTime=0,this.anchors=[],this.anchorId=0}}),n(i,{create:function(){return new r},kill:function(e){e.clear()}}),i});
